<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dsmp.mapper.TbTopicMapper" >
  <resultMap id="BaseResultMap" type="com.dsmp.pojo.TbTopic" >
    <id column="top_id" property="topId" jdbcType="INTEGER" />
    <result column="sub_id" property="subId" jdbcType="INTEGER" />
    <result column="top_topic" property="topTopic" jdbcType="VARCHAR" />
    <result column="top_img" property="topImg" jdbcType="VARCHAR" />
    <result column="top_answer" property="topAnswer" jdbcType="VARCHAR" />
    <result column="top_answerDetail" property="topAnswerDetail" jdbcType="VARCHAR" />
    <collection property="options" ofType="com.dsmp.pojo.TbOption"><!--  javaType="java.util.ArrayList" column="top_id" select="selectOptions" -->
    	<id column="opt_id" property="optId" jdbcType="INTEGER" />
	    <result column="top_id" property="topId" jdbcType="INTEGER" />
	    <result column="opt_option" property="optOption" jdbcType="VARCHAR" />
	    <result column="opt_status" property="optStatus" jdbcType="VARCHAR" />
    </collection>
  </resultMap>
  <!-- 查询一道题目及其子对象（选项集合） -->
   <select id="findTopic" parameterType="java.lang.Integer" resultMap="BaseResultMap">
   		select * from tb_topic top left join tb_option opt on top.top_id=opt.top_id where top.top_id=#{topId}
   </select>
<!--    <select id="selectOptions" parameterType="java.lang.Integer" resultType="com.dsmp.pojo.TbOption">
   		select * from tb_option where top_id=#{topId}
   </select> -->

 <!-- 查询多道题目及其子对象（选项集合） -->
    <select id="findManyTopic" resultMap="BaseResultMap">
   		select * from tb_topic top left join tb_option opt on top.top_id=opt.top_id
   </select>  
  
</mapper>